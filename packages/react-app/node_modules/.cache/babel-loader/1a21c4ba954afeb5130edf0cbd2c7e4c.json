{"ast":null,"code":"import _regeneratorRuntime from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport WalletConnect from \"@walletconnect/client\";\nimport QRCodeModal from \"@walletconnect/qrcode-modal\";\nimport HttpConnection from \"@walletconnect/http-connection\";\nimport { payloadId, signingMethods, parsePersonalSign, getRpcUrl } from \"@walletconnect/utils\";\nvar ProviderEngine = require(\"web3-provider-engine\");\nvar CacheSubprovider = require(\"web3-provider-engine/subproviders/cache\");\nvar FixtureSubprovider = require(\"web3-provider-engine/subproviders/fixture\");\nvar FilterSubprovider = require(\"web3-provider-engine/subproviders/filters\");\nvar HookedWalletSubprovider = require(\"web3-provider-engine/subproviders/hooked-wallet\");\nvar NonceSubprovider = require(\"web3-provider-engine/subproviders/nonce-tracker\");\nvar SubscriptionsSubprovider = require(\"web3-provider-engine/subproviders/subscriptions\");\nvar WalletConnectProvider = /*#__PURE__*/function (_ProviderEngine) {\n  _inherits(WalletConnectProvider, _ProviderEngine);\n  var _super = _createSuper(WalletConnectProvider);\n  function WalletConnectProvider(opts) {\n    var _this;\n    _classCallCheck(this, WalletConnectProvider);\n    _this = _super.call(this, {\n      pollingInterval: opts.pollingInterval || 8000\n    });\n    _this.bridge = \"https://bridge.walletconnect.org\";\n    _this.qrcode = true;\n    _this.qrcodeModal = QRCodeModal;\n    _this.qrcodeModalOptions = undefined;\n    _this.rpc = null;\n    _this.infuraId = \"\";\n    _this.http = null;\n    _this.isConnecting = false;\n    _this.connected = false;\n    _this.connectCallbacks = [];\n    _this.accounts = [];\n    _this.chainId = 1;\n    _this.rpcUrl = \"\";\n    _this.enable = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var wc;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _this.getWalletConnector();\n          case 2:\n            wc = _context.sent;\n            if (!wc) {\n              _context.next = 9;\n              break;\n            }\n            _this.start();\n            _this.subscribeWalletConnector();\n            return _context.abrupt(\"return\", wc.accounts);\n          case 9:\n            throw new Error(\"Failed to connect to WalleConnect\");\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    _this.request = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(payload) {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", _this.send(payload));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    _this.send = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(payload, callback) {\n        var _a, method, params, _yield$_this$handleOt, result;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(typeof payload === \"string\")) {\n                _context3.next = 5;\n                break;\n              }\n              method = payload;\n              params = callback;\n              if (method === \"personal_sign\") {\n                params = parsePersonalSign(params);\n              }\n              return _context3.abrupt(\"return\", _this.sendAsyncPromise(method, params));\n            case 5:\n              payload = Object.assign({\n                id: payloadId(),\n                jsonrpc: \"2.0\"\n              }, payload);\n              if (payload.method === \"personal_sign\") {\n                payload.params = parsePersonalSign(payload.params);\n              }\n              if (!callback) {\n                _context3.next = 10;\n                break;\n              }\n              _this.sendAsync(payload, callback);\n              return _context3.abrupt(\"return\");\n            case 10:\n              if (!(payload.method === \"eth_signTypedData_v4\" && ((_a = _this.walletMeta) === null || _a === void 0 ? void 0 : _a.name) === \"MetaMask\")) {\n                _context3.next = 18;\n                break;\n              }\n              _context3.next = 13;\n              return _this.handleOtherRequests(payload);\n            case 13:\n              _yield$_this$handleOt = _context3.sent;\n              result = _yield$_this$handleOt.result;\n              return _context3.abrupt(\"return\", result);\n            case 18:\n              return _context3.abrupt(\"return\", _this.sendAsyncPromise(payload.method, payload.params));\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      return function (_x2, _x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    _this.onConnect = function (callback) {\n      _this.connectCallbacks.push(callback);\n    };\n    _this.triggerConnect = function (result) {\n      if (_this.connectCallbacks && _this.connectCallbacks.length) {\n        _this.connectCallbacks.forEach(function (callback) {\n          return callback(result);\n        });\n      }\n    };\n    _this.bridge = opts.connector ? opts.connector.bridge : opts.bridge || \"https://bridge.walletconnect.org\";\n    _this.qrcode = typeof opts.qrcode === \"undefined\" || opts.qrcode !== false;\n    _this.qrcodeModal = opts.qrcodeModal || _this.qrcodeModal;\n    _this.qrcodeModalOptions = opts.qrcodeModalOptions;\n    _this.wc = opts.connector || new WalletConnect({\n      bridge: _this.bridge,\n      qrcodeModal: _this.qrcode ? _this.qrcodeModal : undefined,\n      qrcodeModalOptions: _this.qrcodeModalOptions,\n      storageId: opts === null || opts === void 0 ? void 0 : opts.storageId,\n      signingMethods: opts === null || opts === void 0 ? void 0 : opts.signingMethods,\n      clientMeta: opts === null || opts === void 0 ? void 0 : opts.clientMeta\n    });\n    _this.rpc = opts.rpc || null;\n    if (!_this.rpc && (!opts.infuraId || typeof opts.infuraId !== \"string\" || !opts.infuraId.trim())) {\n      throw new Error(\"Missing one of the required parameters: rpc or infuraId\");\n    }\n    _this.infuraId = opts.infuraId || \"\";\n    _this.chainId = (opts === null || opts === void 0 ? void 0 : opts.chainId) || _this.chainId;\n    _this.initialize();\n    return _this;\n  }\n  _createClass(WalletConnectProvider, [{\n    key: \"isWalletConnect\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"connector\",\n    get: function get() {\n      return this.wc;\n    }\n  }, {\n    key: \"walletMeta\",\n    get: function get() {\n      return this.wc.peerMeta;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              this.close();\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n      return disconnect;\n    }()\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var wc;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.getWalletConnector({\n                disableSessionCreation: true\n              });\n            case 2:\n              wc = _context5.sent;\n              _context5.next = 5;\n              return wc.killSession();\n            case 5:\n              _context5.next = 7;\n              return this.onDisconnect();\n            case 7:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function close() {\n        return _close.apply(this, arguments);\n      }\n      return close;\n    }()\n  }, {\n    key: \"handleRequest\",\n    value: function () {\n      var _handleRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(payload) {\n        var response, result, wc;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              result = null;\n              _context6.next = 4;\n              return this.getWalletConnector();\n            case 4:\n              wc = _context6.sent;\n              _context6.t0 = payload.method;\n              _context6.next = _context6.t0 === \"wc_killSession\" ? 8 : _context6.t0 === \"eth_accounts\" ? 12 : _context6.t0 === \"eth_coinbase\" ? 14 : _context6.t0 === \"eth_chainId\" ? 16 : _context6.t0 === \"net_version\" ? 18 : _context6.t0 === \"eth_uninstallFilter\" ? 20 : 23;\n              break;\n            case 8:\n              _context6.next = 10;\n              return this.close();\n            case 10:\n              result = null;\n              return _context6.abrupt(\"break\", 26);\n            case 12:\n              result = wc.accounts;\n              return _context6.abrupt(\"break\", 26);\n            case 14:\n              result = wc.accounts[0];\n              return _context6.abrupt(\"break\", 26);\n            case 16:\n              result = wc.chainId;\n              return _context6.abrupt(\"break\", 26);\n            case 18:\n              result = wc.chainId;\n              return _context6.abrupt(\"break\", 26);\n            case 20:\n              this.sendAsync(payload, function (_) {\n                return _;\n              });\n              result = true;\n              return _context6.abrupt(\"break\", 26);\n            case 23:\n              _context6.next = 25;\n              return this.handleOtherRequests(payload);\n            case 25:\n              response = _context6.sent;\n            case 26:\n              if (!response) {\n                _context6.next = 28;\n                break;\n              }\n              return _context6.abrupt(\"return\", response);\n            case 28:\n              return _context6.abrupt(\"return\", this.formatResponse(payload, result));\n            case 31:\n              _context6.prev = 31;\n              _context6.t1 = _context6[\"catch\"](0);\n              this.emit(\"error\", _context6.t1);\n              throw _context6.t1;\n            case 35:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this, [[0, 31]]);\n      }));\n      function handleRequest(_x4) {\n        return _handleRequest.apply(this, arguments);\n      }\n      return handleRequest;\n    }()\n  }, {\n    key: \"handleOtherRequests\",\n    value: function () {\n      var _handleOtherRequests = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(payload) {\n        var wc, result;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              if (!(!signingMethods.includes(payload.method) && payload.method.startsWith(\"eth_\"))) {\n                _context7.next = 2;\n                break;\n              }\n              return _context7.abrupt(\"return\", this.handleReadRequests(payload));\n            case 2:\n              _context7.next = 4;\n              return this.getWalletConnector();\n            case 4:\n              wc = _context7.sent;\n              _context7.next = 7;\n              return wc.sendCustomRequest(payload);\n            case 7:\n              result = _context7.sent;\n              return _context7.abrupt(\"return\", this.formatResponse(payload, result));\n            case 9:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function handleOtherRequests(_x5) {\n        return _handleOtherRequests.apply(this, arguments);\n      }\n      return handleOtherRequests;\n    }()\n  }, {\n    key: \"handleReadRequests\",\n    value: function () {\n      var _handleReadRequests = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(payload) {\n        var error;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              if (this.http) {\n                _context8.next = 4;\n                break;\n              }\n              error = new Error(\"HTTP Connection not available\");\n              this.emit(\"error\", error);\n              throw error;\n            case 4:\n              return _context8.abrupt(\"return\", this.http.send(payload));\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function handleReadRequests(_x6) {\n        return _handleReadRequests.apply(this, arguments);\n      }\n      return handleReadRequests;\n    }()\n  }, {\n    key: \"formatResponse\",\n    value: function formatResponse(payload, result) {\n      return {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      };\n    }\n  }, {\n    key: \"getWalletConnector\",\n    value: function getWalletConnector() {\n      var _this2 = this;\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$disableSessionC = opts.disableSessionCreation,\n        disableSessionCreation = _opts$disableSessionC === void 0 ? false : _opts$disableSessionC;\n      return new Promise(function (resolve, reject) {\n        var wc = _this2.wc;\n        if (_this2.isConnecting) {\n          _this2.onConnect(function (x) {\n            return resolve(x);\n          });\n        } else if (!wc.connected && !disableSessionCreation) {\n          _this2.isConnecting = true;\n          wc.on(\"modal_closed\", function () {\n            reject(new Error(\"User closed modal\"));\n          });\n          wc.createSession({\n            chainId: _this2.chainId\n          }).then(function () {\n            wc.on(\"connect\", function (error, payload) {\n              if (error) {\n                _this2.isConnecting = false;\n                return reject(error);\n              }\n              _this2.isConnecting = false;\n              _this2.connected = true;\n              if (payload) {\n                _this2.updateState(payload.params[0]);\n              }\n              _this2.emit(\"connect\");\n              _this2.triggerConnect(wc);\n              resolve(wc);\n            });\n          }).catch(function (error) {\n            _this2.isConnecting = false;\n            reject(error);\n          });\n        } else {\n          if (!_this2.connected) {\n            _this2.connected = true;\n            _this2.updateState(wc.session);\n          }\n          resolve(wc);\n        }\n      });\n    }\n  }, {\n    key: \"subscribeWalletConnector\",\n    value: function () {\n      var _subscribeWalletConnector = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        var _this3 = this;\n        var wc;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return this.getWalletConnector();\n            case 2:\n              wc = _context9.sent;\n              wc.on(\"disconnect\", function (error) {\n                if (error) {\n                  _this3.emit(\"error\", error);\n                  return;\n                }\n                _this3.onDisconnect();\n              });\n              wc.on(\"session_update\", function (error, payload) {\n                if (error) {\n                  _this3.emit(\"error\", error);\n                  return;\n                }\n                _this3.updateState(payload.params[0]);\n              });\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function subscribeWalletConnector() {\n        return _subscribeWalletConnector.apply(this, arguments);\n      }\n      return subscribeWalletConnector;\n    }()\n  }, {\n    key: \"onDisconnect\",\n    value: function () {\n      var _onDisconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return this.stop();\n            case 2:\n              this.emit(\"close\", 1000, \"Connection closed\");\n              this.emit(\"disconnect\", 1000, \"Connection disconnected\");\n              this.connected = false;\n            case 5:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function onDisconnect() {\n        return _onDisconnect.apply(this, arguments);\n      }\n      return onDisconnect;\n    }()\n  }, {\n    key: \"updateState\",\n    value: function () {\n      var _updateState = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(sessionParams) {\n        var accounts, chainId, networkId, rpcUrl;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              accounts = sessionParams.accounts, chainId = sessionParams.chainId, networkId = sessionParams.networkId, rpcUrl = sessionParams.rpcUrl;\n              if (!this.accounts || accounts && this.accounts !== accounts) {\n                this.accounts = accounts;\n                this.emit(\"accountsChanged\", accounts);\n              }\n              if (!this.chainId || chainId && this.chainId !== chainId) {\n                this.chainId = chainId;\n                this.emit(\"chainChanged\", chainId);\n              }\n              if (!this.networkId || networkId && this.networkId !== networkId) {\n                this.networkId = networkId;\n                this.emit(\"networkChanged\", networkId);\n              }\n              this.updateRpcUrl(this.chainId, rpcUrl || \"\");\n            case 5:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function updateState(_x7) {\n        return _updateState.apply(this, arguments);\n      }\n      return updateState;\n    }()\n  }, {\n    key: \"updateRpcUrl\",\n    value: function updateRpcUrl(chainId) {\n      var rpcUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var rpc = {\n        infuraId: this.infuraId,\n        custom: this.rpc || undefined\n      };\n      rpcUrl = rpcUrl || getRpcUrl(chainId, rpc);\n      if (rpcUrl) {\n        this.rpcUrl = rpcUrl;\n        this.updateHttpConnection();\n      } else {\n        this.emit(\"error\", new Error(\"No RPC Url available for chainId: \".concat(chainId)));\n      }\n    }\n  }, {\n    key: \"updateHttpConnection\",\n    value: function updateHttpConnection() {\n      var _this4 = this;\n      if (this.rpcUrl) {\n        this.http = new HttpConnection(this.rpcUrl);\n        this.http.on(\"payload\", function (payload) {\n          return _this4.emit(\"payload\", payload);\n        });\n        this.http.on(\"error\", function (error) {\n          return _this4.emit(\"error\", error);\n        });\n      }\n    }\n  }, {\n    key: \"sendAsyncPromise\",\n    value: function sendAsyncPromise(method, params) {\n      var _this5 = this;\n      return new Promise(function (resolve, reject) {\n        _this5.sendAsync({\n          id: payloadId(),\n          jsonrpc: \"2.0\",\n          method: method,\n          params: params || []\n        }, function (error, response) {\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(response.result);\n        });\n      });\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this6 = this;\n      this.updateRpcUrl(this.chainId);\n      this.addProvider(new FixtureSubprovider({\n        eth_hashrate: \"0x00\",\n        eth_mining: false,\n        eth_syncing: true,\n        net_listening: true,\n        web3_clientVersion: \"WalletConnect/v1.x.x/javascript\"\n      }));\n      this.addProvider(new CacheSubprovider());\n      this.addProvider(new SubscriptionsSubprovider());\n      this.addProvider(new FilterSubprovider());\n      this.addProvider(new NonceSubprovider());\n      this.addProvider(new HookedWalletSubprovider(this.configWallet()));\n      this.addProvider({\n        handleRequest: function () {\n          var _handleRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(payload, next, end) {\n            var _yield$_this6$handleR, error, result;\n            return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n              while (1) switch (_context12.prev = _context12.next) {\n                case 0:\n                  _context12.prev = 0;\n                  _context12.next = 3;\n                  return _this6.handleRequest(payload);\n                case 3:\n                  _yield$_this6$handleR = _context12.sent;\n                  error = _yield$_this6$handleR.error;\n                  result = _yield$_this6$handleR.result;\n                  end(error, result);\n                  _context12.next = 12;\n                  break;\n                case 9:\n                  _context12.prev = 9;\n                  _context12.t0 = _context12[\"catch\"](0);\n                  end(_context12.t0);\n                case 12:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }, _callee12, null, [[0, 9]]);\n          }));\n          function handleRequest(_x8, _x9, _x10) {\n            return _handleRequest2.apply(this, arguments);\n          }\n          return handleRequest;\n        }(),\n        setEngine: function setEngine(_) {\n          return _;\n        }\n      });\n    }\n  }, {\n    key: \"configWallet\",\n    value: function configWallet() {\n      var _this7 = this;\n      return {\n        getAccounts: function () {\n          var _getAccounts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(cb) {\n            var wc, accounts;\n            return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n              while (1) switch (_context13.prev = _context13.next) {\n                case 0:\n                  _context13.prev = 0;\n                  _context13.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context13.sent;\n                  accounts = wc.accounts;\n                  if (accounts && accounts.length) {\n                    cb(null, accounts);\n                  } else {\n                    cb(new Error(\"Failed to get accounts\"));\n                  }\n                  _context13.next = 11;\n                  break;\n                case 8:\n                  _context13.prev = 8;\n                  _context13.t0 = _context13[\"catch\"](0);\n                  cb(_context13.t0);\n                case 11:\n                case \"end\":\n                  return _context13.stop();\n              }\n            }, _callee13, null, [[0, 8]]);\n          }));\n          function getAccounts(_x11) {\n            return _getAccounts.apply(this, arguments);\n          }\n          return getAccounts;\n        }(),\n        processMessage: function () {\n          var _processMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(msgParams, cb) {\n            var wc, result;\n            return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n              while (1) switch (_context14.prev = _context14.next) {\n                case 0:\n                  _context14.prev = 0;\n                  _context14.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context14.sent;\n                  _context14.next = 6;\n                  return wc.signMessage([msgParams.from, msgParams.data]);\n                case 6:\n                  result = _context14.sent;\n                  cb(null, result);\n                  _context14.next = 13;\n                  break;\n                case 10:\n                  _context14.prev = 10;\n                  _context14.t0 = _context14[\"catch\"](0);\n                  cb(_context14.t0);\n                case 13:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }, _callee14, null, [[0, 10]]);\n          }));\n          function processMessage(_x12, _x13) {\n            return _processMessage.apply(this, arguments);\n          }\n          return processMessage;\n        }(),\n        processPersonalMessage: function () {\n          var _processPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(msgParams, cb) {\n            var wc, result;\n            return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n              while (1) switch (_context15.prev = _context15.next) {\n                case 0:\n                  _context15.prev = 0;\n                  _context15.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context15.sent;\n                  _context15.next = 6;\n                  return wc.signPersonalMessage([msgParams.data, msgParams.from]);\n                case 6:\n                  result = _context15.sent;\n                  cb(null, result);\n                  _context15.next = 13;\n                  break;\n                case 10:\n                  _context15.prev = 10;\n                  _context15.t0 = _context15[\"catch\"](0);\n                  cb(_context15.t0);\n                case 13:\n                case \"end\":\n                  return _context15.stop();\n              }\n            }, _callee15, null, [[0, 10]]);\n          }));\n          function processPersonalMessage(_x14, _x15) {\n            return _processPersonalMessage.apply(this, arguments);\n          }\n          return processPersonalMessage;\n        }(),\n        processSignTransaction: function () {\n          var _processSignTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(txParams, cb) {\n            var wc, result;\n            return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n              while (1) switch (_context16.prev = _context16.next) {\n                case 0:\n                  _context16.prev = 0;\n                  _context16.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context16.sent;\n                  _context16.next = 6;\n                  return wc.signTransaction(txParams);\n                case 6:\n                  result = _context16.sent;\n                  cb(null, result);\n                  _context16.next = 13;\n                  break;\n                case 10:\n                  _context16.prev = 10;\n                  _context16.t0 = _context16[\"catch\"](0);\n                  cb(_context16.t0);\n                case 13:\n                case \"end\":\n                  return _context16.stop();\n              }\n            }, _callee16, null, [[0, 10]]);\n          }));\n          function processSignTransaction(_x16, _x17) {\n            return _processSignTransaction.apply(this, arguments);\n          }\n          return processSignTransaction;\n        }(),\n        processTransaction: function () {\n          var _processTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17(txParams, cb) {\n            var wc, result;\n            return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n              while (1) switch (_context17.prev = _context17.next) {\n                case 0:\n                  _context17.prev = 0;\n                  _context17.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context17.sent;\n                  _context17.next = 6;\n                  return wc.sendTransaction(txParams);\n                case 6:\n                  result = _context17.sent;\n                  cb(null, result);\n                  _context17.next = 13;\n                  break;\n                case 10:\n                  _context17.prev = 10;\n                  _context17.t0 = _context17[\"catch\"](0);\n                  cb(_context17.t0);\n                case 13:\n                case \"end\":\n                  return _context17.stop();\n              }\n            }, _callee17, null, [[0, 10]]);\n          }));\n          function processTransaction(_x18, _x19) {\n            return _processTransaction.apply(this, arguments);\n          }\n          return processTransaction;\n        }(),\n        processTypedMessage: function () {\n          var _processTypedMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(msgParams, cb) {\n            var wc, result;\n            return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n              while (1) switch (_context18.prev = _context18.next) {\n                case 0:\n                  _context18.prev = 0;\n                  _context18.next = 3;\n                  return _this7.getWalletConnector();\n                case 3:\n                  wc = _context18.sent;\n                  _context18.next = 6;\n                  return wc.signTypedData([msgParams.from, msgParams.data]);\n                case 6:\n                  result = _context18.sent;\n                  cb(null, result);\n                  _context18.next = 13;\n                  break;\n                case 10:\n                  _context18.prev = 10;\n                  _context18.t0 = _context18[\"catch\"](0);\n                  cb(_context18.t0);\n                case 13:\n                case \"end\":\n                  return _context18.stop();\n              }\n            }, _callee18, null, [[0, 10]]);\n          }));\n          function processTypedMessage(_x20, _x21) {\n            return _processTypedMessage.apply(this, arguments);\n          }\n          return processTypedMessage;\n        }()\n      };\n    }\n  }]);\n  return WalletConnectProvider;\n}(ProviderEngine);\nexport default WalletConnectProvider;","map":{"version":3,"sources":["../../src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import WalletConnect from \"@walletconnect/client\";\nimport QRCodeModal from \"@walletconnect/qrcode-modal\";\nimport HttpConnection from \"@walletconnect/http-connection\";\nimport { payloadId, signingMethods, parsePersonalSign, getRpcUrl } from \"@walletconnect/utils\";\nconst ProviderEngine = require(\"web3-provider-engine\");\nconst CacheSubprovider = require(\"web3-provider-engine/subproviders/cache\");\nconst FixtureSubprovider = require(\"web3-provider-engine/subproviders/fixture\");\nconst FilterSubprovider = require(\"web3-provider-engine/subproviders/filters\");\nconst HookedWalletSubprovider = require(\"web3-provider-engine/subproviders/hooked-wallet\");\nconst NonceSubprovider = require(\"web3-provider-engine/subproviders/nonce-tracker\");\nconst SubscriptionsSubprovider = require(\"web3-provider-engine/subproviders/subscriptions\");\nclass WalletConnectProvider extends ProviderEngine {\n    constructor(opts) {\n        super({ pollingInterval: opts.pollingInterval || 8000 });\n        this.bridge = \"https://bridge.walletconnect.org\";\n        this.qrcode = true;\n        this.qrcodeModal = QRCodeModal;\n        this.qrcodeModalOptions = undefined;\n        this.rpc = null;\n        this.infuraId = \"\";\n        this.http = null;\n        this.isConnecting = false;\n        this.connected = false;\n        this.connectCallbacks = [];\n        this.accounts = [];\n        this.chainId = 1;\n        this.rpcUrl = \"\";\n        this.enable = async () => {\n            const wc = await this.getWalletConnector();\n            if (wc) {\n                this.start();\n                this.subscribeWalletConnector();\n                return wc.accounts;\n            }\n            else {\n                throw new Error(\"Failed to connect to WalleConnect\");\n            }\n        };\n        this.request = async (payload) => {\n            return this.send(payload);\n        };\n        this.send = async (payload, callback) => {\n            var _a;\n            if (typeof payload === \"string\") {\n                const method = payload;\n                let params = callback;\n                if (method === \"personal_sign\") {\n                    params = parsePersonalSign(params);\n                }\n                return this.sendAsyncPromise(method, params);\n            }\n            payload = Object.assign({ id: payloadId(), jsonrpc: \"2.0\" }, payload);\n            if (payload.method === \"personal_sign\") {\n                payload.params = parsePersonalSign(payload.params);\n            }\n            if (callback) {\n                this.sendAsync(payload, callback);\n                return;\n            }\n            if (payload.method === \"eth_signTypedData_v4\" && ((_a = this.walletMeta) === null || _a === void 0 ? void 0 : _a.name) === \"MetaMask\") {\n                const { result } = await this.handleOtherRequests(payload);\n                return result;\n            }\n            else {\n                return this.sendAsyncPromise(payload.method, payload.params);\n            }\n        };\n        this.onConnect = (callback) => {\n            this.connectCallbacks.push(callback);\n        };\n        this.triggerConnect = (result) => {\n            if (this.connectCallbacks && this.connectCallbacks.length) {\n                this.connectCallbacks.forEach(callback => callback(result));\n            }\n        };\n        this.bridge = opts.connector\n            ? opts.connector.bridge\n            : opts.bridge || \"https://bridge.walletconnect.org\";\n        this.qrcode = typeof opts.qrcode === \"undefined\" || opts.qrcode !== false;\n        this.qrcodeModal = opts.qrcodeModal || this.qrcodeModal;\n        this.qrcodeModalOptions = opts.qrcodeModalOptions;\n        this.wc =\n            opts.connector ||\n                new WalletConnect({\n                    bridge: this.bridge,\n                    qrcodeModal: this.qrcode ? this.qrcodeModal : undefined,\n                    qrcodeModalOptions: this.qrcodeModalOptions,\n                    storageId: opts === null || opts === void 0 ? void 0 : opts.storageId,\n                    signingMethods: opts === null || opts === void 0 ? void 0 : opts.signingMethods,\n                    clientMeta: opts === null || opts === void 0 ? void 0 : opts.clientMeta,\n                });\n        this.rpc = opts.rpc || null;\n        if (!this.rpc &&\n            (!opts.infuraId || typeof opts.infuraId !== \"string\" || !opts.infuraId.trim())) {\n            throw new Error(\"Missing one of the required parameters: rpc or infuraId\");\n        }\n        this.infuraId = opts.infuraId || \"\";\n        this.chainId = (opts === null || opts === void 0 ? void 0 : opts.chainId) || this.chainId;\n        this.initialize();\n    }\n    get isWalletConnect() {\n        return true;\n    }\n    get connector() {\n        return this.wc;\n    }\n    get walletMeta() {\n        return this.wc.peerMeta;\n    }\n    async disconnect() {\n        this.close();\n    }\n    async close() {\n        const wc = await this.getWalletConnector({ disableSessionCreation: true });\n        await wc.killSession();\n        await this.onDisconnect();\n    }\n    async handleRequest(payload) {\n        try {\n            let response;\n            let result = null;\n            const wc = await this.getWalletConnector();\n            switch (payload.method) {\n                case \"wc_killSession\":\n                    await this.close();\n                    result = null;\n                    break;\n                case \"eth_accounts\":\n                    result = wc.accounts;\n                    break;\n                case \"eth_coinbase\":\n                    result = wc.accounts[0];\n                    break;\n                case \"eth_chainId\":\n                    result = wc.chainId;\n                    break;\n                case \"net_version\":\n                    result = wc.chainId;\n                    break;\n                case \"eth_uninstallFilter\":\n                    this.sendAsync(payload, (_) => _);\n                    result = true;\n                    break;\n                default:\n                    response = await this.handleOtherRequests(payload);\n            }\n            if (response) {\n                return response;\n            }\n            return this.formatResponse(payload, result);\n        }\n        catch (error) {\n            this.emit(\"error\", error);\n            throw error;\n        }\n    }\n    async handleOtherRequests(payload) {\n        if (!signingMethods.includes(payload.method) && payload.method.startsWith(\"eth_\")) {\n            return this.handleReadRequests(payload);\n        }\n        const wc = await this.getWalletConnector();\n        const result = await wc.sendCustomRequest(payload);\n        return this.formatResponse(payload, result);\n    }\n    async handleReadRequests(payload) {\n        if (!this.http) {\n            const error = new Error(\"HTTP Connection not available\");\n            this.emit(\"error\", error);\n            throw error;\n        }\n        return this.http.send(payload);\n    }\n    formatResponse(payload, result) {\n        return {\n            id: payload.id,\n            jsonrpc: payload.jsonrpc,\n            result: result,\n        };\n    }\n    getWalletConnector(opts = {}) {\n        const { disableSessionCreation = false } = opts;\n        return new Promise((resolve, reject) => {\n            const wc = this.wc;\n            if (this.isConnecting) {\n                this.onConnect((x) => resolve(x));\n            }\n            else if (!wc.connected && !disableSessionCreation) {\n                this.isConnecting = true;\n                wc.on(\"modal_closed\", () => {\n                    reject(new Error(\"User closed modal\"));\n                });\n                wc.createSession({ chainId: this.chainId })\n                    .then(() => {\n                    wc.on(\"connect\", (error, payload) => {\n                        if (error) {\n                            this.isConnecting = false;\n                            return reject(error);\n                        }\n                        this.isConnecting = false;\n                        this.connected = true;\n                        if (payload) {\n                            this.updateState(payload.params[0]);\n                        }\n                        this.emit(\"connect\");\n                        this.triggerConnect(wc);\n                        resolve(wc);\n                    });\n                })\n                    .catch(error => {\n                    this.isConnecting = false;\n                    reject(error);\n                });\n            }\n            else {\n                if (!this.connected) {\n                    this.connected = true;\n                    this.updateState(wc.session);\n                }\n                resolve(wc);\n            }\n        });\n    }\n    async subscribeWalletConnector() {\n        const wc = await this.getWalletConnector();\n        wc.on(\"disconnect\", error => {\n            if (error) {\n                this.emit(\"error\", error);\n                return;\n            }\n            this.onDisconnect();\n        });\n        wc.on(\"session_update\", (error, payload) => {\n            if (error) {\n                this.emit(\"error\", error);\n                return;\n            }\n            this.updateState(payload.params[0]);\n        });\n    }\n    async onDisconnect() {\n        await this.stop();\n        this.emit(\"close\", 1000, \"Connection closed\");\n        this.emit(\"disconnect\", 1000, \"Connection disconnected\");\n        this.connected = false;\n    }\n    async updateState(sessionParams) {\n        const { accounts, chainId, networkId, rpcUrl } = sessionParams;\n        if (!this.accounts || (accounts && this.accounts !== accounts)) {\n            this.accounts = accounts;\n            this.emit(\"accountsChanged\", accounts);\n        }\n        if (!this.chainId || (chainId && this.chainId !== chainId)) {\n            this.chainId = chainId;\n            this.emit(\"chainChanged\", chainId);\n        }\n        if (!this.networkId || (networkId && this.networkId !== networkId)) {\n            this.networkId = networkId;\n            this.emit(\"networkChanged\", networkId);\n        }\n        this.updateRpcUrl(this.chainId, rpcUrl || \"\");\n    }\n    updateRpcUrl(chainId, rpcUrl = \"\") {\n        const rpc = { infuraId: this.infuraId, custom: this.rpc || undefined };\n        rpcUrl = rpcUrl || getRpcUrl(chainId, rpc);\n        if (rpcUrl) {\n            this.rpcUrl = rpcUrl;\n            this.updateHttpConnection();\n        }\n        else {\n            this.emit(\"error\", new Error(`No RPC Url available for chainId: ${chainId}`));\n        }\n    }\n    updateHttpConnection() {\n        if (this.rpcUrl) {\n            this.http = new HttpConnection(this.rpcUrl);\n            this.http.on(\"payload\", payload => this.emit(\"payload\", payload));\n            this.http.on(\"error\", error => this.emit(\"error\", error));\n        }\n    }\n    sendAsyncPromise(method, params) {\n        return new Promise((resolve, reject) => {\n            this.sendAsync({\n                id: payloadId(),\n                jsonrpc: \"2.0\",\n                method,\n                params: params || [],\n            }, (error, response) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                resolve(response.result);\n            });\n        });\n    }\n    initialize() {\n        this.updateRpcUrl(this.chainId);\n        this.addProvider(new FixtureSubprovider({\n            eth_hashrate: \"0x00\",\n            eth_mining: false,\n            eth_syncing: true,\n            net_listening: true,\n            web3_clientVersion: `WalletConnect/v1.x.x/javascript`,\n        }));\n        this.addProvider(new CacheSubprovider());\n        this.addProvider(new SubscriptionsSubprovider());\n        this.addProvider(new FilterSubprovider());\n        this.addProvider(new NonceSubprovider());\n        this.addProvider(new HookedWalletSubprovider(this.configWallet()));\n        this.addProvider({\n            handleRequest: async (payload, next, end) => {\n                try {\n                    const { error, result } = await this.handleRequest(payload);\n                    end(error, result);\n                }\n                catch (error) {\n                    end(error);\n                }\n            },\n            setEngine: (_) => _,\n        });\n    }\n    configWallet() {\n        return {\n            getAccounts: async (cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const accounts = wc.accounts;\n                    if (accounts && accounts.length) {\n                        cb(null, accounts);\n                    }\n                    else {\n                        cb(new Error(\"Failed to get accounts\"));\n                    }\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n            processMessage: async (msgParams, cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const result = await wc.signMessage([msgParams.from, msgParams.data]);\n                    cb(null, result);\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n            processPersonalMessage: async (msgParams, cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const result = await wc.signPersonalMessage([msgParams.data, msgParams.from]);\n                    cb(null, result);\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n            processSignTransaction: async (txParams, cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const result = await wc.signTransaction(txParams);\n                    cb(null, result);\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n            processTransaction: async (txParams, cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const result = await wc.sendTransaction(txParams);\n                    cb(null, result);\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n            processTypedMessage: async (msgParams, cb) => {\n                try {\n                    const wc = await this.getWalletConnector();\n                    const result = await wc.signTypedData([msgParams.from, msgParams.data]);\n                    cb(null, result);\n                }\n                catch (error) {\n                    cb(error);\n                }\n            },\n        };\n    }\n}\nexport default WalletConnectProvider;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}