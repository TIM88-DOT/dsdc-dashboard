{"ast":null,"code":"import _regeneratorRuntime from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./TotalRewards.module.scss\";import{ButtonPrimary}from\"../index\";import Typography from\"@mui/material/Typography\";import{useCall,useEthers}from\"@usedapp/core\";import{Contract}from\"@ethersproject/contracts\";import{useState,useContext}from\"react\";import{addresses,abis}from\"@uniswap-v2-app/contracts\";import{ethers}from\"ethers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TotalRewards(props){var _useCall;var _useEthers=useEthers(),account=_useEthers.account,chainId=_useEthers.chainId,library=_useEthers.library;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var plan=props.plan;var _ref=(_useCall=useCall(account&&{contract:new Contract(addresses.staking,abis.staking),method:\"getEarnedRewards\",args:[plan,account]}))!==null&&_useCall!==void 0?_useCall:{},totalRewardsError=_ref.error,totalRewardsValue=_ref.value;if(totalRewardsError){console.log(totalRewardsError);}else{}var onClaim=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var signer,mutantsStakingContract;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!account){_context.next=12;break;}signer=library.getSigner();mutantsStakingContract=new ethers.Contract(addresses.staking,abis.staking,signer);if(!(Number(totalRewardsValue[0])>0)){_context.next=12;break;}_context.prev=4;_context.next=7;return mutantsStakingContract.claimEarnedReward(plan);case 7:_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](4);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[4,9]]);}));return function onClaim(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes[\"prize-container\"],children:[/*#__PURE__*/_jsx(\"h2\",{style:{padding:\"0.7rem\"},children:\"YOUR REWARDS\"}),account?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\",fontSize:\"16px\"},variant:\"h6\",component:\"h6\",children:\"TOTAL :\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",sx:{color:\"#7b9c13\"},children:totalRewardsValue&&ethers.utils.formatEther(totalRewardsValue[0])}),/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\",fontSize:\"16px\"},variant:\"h6\",component:\"h6\",children:\"CLAIMABLE :\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",sx:{color:\"#7b9c13\"},children:totalRewardsValue&&ethers.utils.formatEther(totalRewardsValue[1])})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Nothing to show\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(ButtonPrimary,{onClick:onClaim,children:\"CLAIM\"})})]});}","map":{"version":3,"names":["classes","ButtonPrimary","Typography","useCall","useEthers","Contract","useState","useContext","addresses","abis","ethers","jsx","_jsx","jsxs","_jsxs","TotalRewards","props","_useCall","_useEthers","account","chainId","library","_useState","_useState2","_slicedToArray","loading","setLoading","plan","_ref","contract","staking","method","args","totalRewardsError","error","totalRewardsValue","value","console","log","onClaim","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","signer","mutantsStakingContract","wrap","_callee$","_context","prev","next","getSigner","Number","claimEarnedReward","t0","stop","apply","arguments","className","children","style","padding","sx","textAlign","fontSize","variant","component","color","utils","formatEther","actions","onClick"],"sources":["D:/dsdc-dashboard/packages/react-app/src/components/TotalRewards/TotalRewards.jsx"],"sourcesContent":["import classes from \"./TotalRewards.module.scss\";\r\nimport { ButtonPrimary } from \"../index\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { useCall, useEthers } from \"@usedapp/core\";\r\nimport { Contract } from \"@ethersproject/contracts\";\r\nimport { useState, useContext } from \"react\";\r\nimport { addresses, abis } from \"@uniswap-v2-app/contracts\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport default function TotalRewards(props) {\r\n  const { account, chainId, library } = useEthers();\r\n  const [loading, setLoading] = useState(false);\r\n  const plan = props.plan;\r\n  const { error: totalRewardsError, value: totalRewardsValue } =\r\n    useCall(\r\n      account && {\r\n        contract: new Contract(addresses.staking, abis.staking),\r\n        method: \"getEarnedRewards\",\r\n        args: [plan, account],\r\n      }\r\n    ) ?? {};\r\n\r\n  if (totalRewardsError) {\r\n    console.log(totalRewardsError);\r\n  } else {\r\n  }\r\n  const onClaim = async () => {\r\n    if (account) {\r\n      const signer = library.getSigner();\r\n      const mutantsStakingContract = new ethers.Contract(\r\n        addresses.staking,\r\n        abis.staking,\r\n        signer\r\n      );\r\n      if (Number(totalRewardsValue[0]) > 0) {\r\n        try {\r\n          await mutantsStakingContract.claimEarnedReward(plan);\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className={classes[\"prize-container\"]}>\r\n      <h2 style={{ padding: \"0.7rem\" }}>YOUR REWARDS</h2>\r\n      {account ? (\r\n        <div>\r\n          <Typography\r\n            sx={{ textAlign: \"center\", fontSize: \"16px\" }}\r\n            variant=\"h6\"\r\n            component=\"h6\"\r\n          >\r\n            TOTAL :\r\n          </Typography>\r\n\r\n          <Typography variant=\"h6\" component=\"h6\" sx={{ color: \"#7b9c13\" }}>\r\n            {totalRewardsValue &&\r\n              ethers.utils.formatEther(totalRewardsValue[0])}\r\n          </Typography>\r\n\r\n          <Typography\r\n            sx={{ textAlign: \"center\", fontSize: \"16px\" }}\r\n            variant=\"h6\"\r\n            component=\"h6\"\r\n          >\r\n            CLAIMABLE :\r\n          </Typography>\r\n\r\n          <Typography variant=\"h6\" component=\"h6\" sx={{ color: \"#7b9c13\" }}>\r\n            {totalRewardsValue &&\r\n              ethers.utils.formatEther(totalRewardsValue[1])}\r\n          </Typography>\r\n        </div>\r\n      ) : (\r\n        <p>Nothing to show</p>\r\n      )}\r\n\r\n      <div className={classes.actions}>\r\n        <ButtonPrimary onClick={onClaim}>CLAIM</ButtonPrimary>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}