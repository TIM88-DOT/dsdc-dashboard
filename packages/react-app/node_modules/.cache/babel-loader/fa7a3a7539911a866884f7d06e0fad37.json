{"ast":null,"code":"import _regeneratorRuntime from\"D:/pcs/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/pcs/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/pcs/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./TotalRewards.module.scss\";import{ButtonPrimary}from\"../index\";import Typography from\"@mui/material/Typography\";import CircularProgress from\"@mui/material/CircularProgress\";import{useEthers}from\"@usedapp/core\";import{addresses,abis}from\"@uniswap-v2-app/contracts\";import{ethers}from\"ethers\";import useGetTotalRewards from\"../../hooks/useGetTotalRewards\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TotalRewards(props){var _useEthers=useEthers(),account=_useEthers.account,library=_useEthers.library;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var plan=props.plan;var totalRewardsValue=useGetTotalRewards(plan);console.log(\"totalRewards\",totalRewardsValue);var onClaim=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var signer,mutantsStakingContract;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!account){_context.next=14;break;}signer=library.getSigner();mutantsStakingContract=new ethers.Contract(addresses.staking,abis.staking,signer);if(!(Number(totalRewardsValue[0])>0)){_context.next=14;break;}_context.prev=4;setLoading(true);_context.next=8;return mutantsStakingContract.claimEarnedReward(plan);case 8:setLoading(false);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[4,11]]);}));return function onClaim(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes[\"prize-container\"],children:[/*#__PURE__*/_jsx(\"h2\",{style:{padding:\"0.7rem\"},children:\"YOUR REWARDS\"}),account?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\",fontSize:\"16px\"},variant:\"h6\",component:\"h6\",children:\"TOTAL REWARDS :\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h6\",sx:{color:\"#7b9c13\"},children:totalRewardsValue&&ethers.utils.formatEther(totalRewardsValue[0])})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Nothing to show\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(ButtonPrimary,{onClick:onClaim,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:\"1.5rem\",color:\"warning\"}):\"CLAIM\"})})]});}","map":{"version":3,"names":["classes","ButtonPrimary","Typography","CircularProgress","useEthers","addresses","abis","ethers","useGetTotalRewards","useState","jsx","_jsx","jsxs","_jsxs","TotalRewards","props","_useEthers","account","library","_useState","_useState2","_slicedToArray","loading","setLoading","plan","totalRewardsValue","console","log","onClaim","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","signer","mutantsStakingContract","wrap","_callee$","_context","prev","next","getSigner","Contract","staking","Number","claimEarnedReward","t0","stop","apply","arguments","className","children","style","padding","sx","textAlign","fontSize","variant","component","color","utils","formatEther","actions","onClick","size"],"sources":["D:/pcs/dsdc-dashboard/packages/react-app/src/components/TotalRewards/TotalRewards.jsx"],"sourcesContent":["import classes from \"./TotalRewards.module.scss\";\r\nimport { ButtonPrimary } from \"../index\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport { useEthers } from \"@usedapp/core\";\r\nimport { addresses, abis } from \"@uniswap-v2-app/contracts\";\r\nimport { ethers } from \"ethers\";\r\nimport useGetTotalRewards from \"../../hooks/useGetTotalRewards\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function TotalRewards(props) {\r\n  const { account, library } = useEthers();\r\n  const [loading, setLoading] = useState(false);\r\n  const plan = props.plan;\r\n  const totalRewardsValue = useGetTotalRewards(plan);\r\n  console.log(\"totalRewards\", totalRewardsValue);\r\n\r\n  const onClaim = async () => {\r\n    if (account) {\r\n      const signer = library.getSigner();\r\n      const mutantsStakingContract = new ethers.Contract(\r\n        addresses.staking,\r\n        abis.staking,\r\n        signer\r\n      );\r\n      if (Number(totalRewardsValue[0]) > 0) {\r\n        try {\r\n          setLoading(true);\r\n          await mutantsStakingContract.claimEarnedReward(plan);\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className={classes[\"prize-container\"]}>\r\n      <h2 style={{ padding: \"0.7rem\" }}>YOUR REWARDS</h2>\r\n      {account ? (\r\n        <div>\r\n          <Typography\r\n            sx={{ textAlign: \"center\", fontSize: \"16px\" }}\r\n            variant=\"h6\"\r\n            component=\"h6\"\r\n          >\r\n            TOTAL REWARDS :\r\n          </Typography>\r\n\r\n          <Typography variant=\"h6\" component=\"h6\" sx={{ color: \"#7b9c13\" }}>\r\n            {totalRewardsValue &&\r\n              ethers.utils.formatEther(totalRewardsValue[0])}\r\n          </Typography>\r\n        </div>\r\n      ) : (\r\n        <p>Nothing to show</p>\r\n      )}\r\n\r\n      <div className={classes.actions}>\r\n        <ButtonPrimary onClick={onClaim}>\r\n          {loading ? (\r\n            <CircularProgress size=\"1.5rem\" color=\"warning\" />\r\n          ) : (\r\n            \"CLAIM\"\r\n          )}\r\n        </ButtonPrimary>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}