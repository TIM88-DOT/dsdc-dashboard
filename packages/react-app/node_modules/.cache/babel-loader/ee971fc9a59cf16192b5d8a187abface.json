{"ast":null,"code":"import _regeneratorRuntime from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/dsdc-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button}from\"../components\";import{Mumbai,shortenAddress,useEthers,useLookupAddress}from\"@usedapp/core\";import React,{useEffect,useState}from\"react\";import Web3Modal from\"web3modal\";import WalletConnectProvider from\"@walletconnect/web3-provider\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function WalletButton(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),rendered=_useState2[0],setRendered=_useState2[1];var _useLookupAddress=useLookupAddress(),ens=_useLookupAddress.ens;var _useEthers=useEthers(),account=_useEthers.account,activate=_useEthers.activate,deactivate=_useEthers.deactivate,switchNetwork=_useEthers.switchNetwork,error=_useEthers.error,chainId=_useEthers.chainId;var activateProvider=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var providerOptions,web3Modal,provider;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:providerOptions={injected:{display:{name:\"Metamask\",description:\"Connect with the provider in your Browser\"},package:null},walletconnect:{package:WalletConnectProvider,options:{chainId:8001,rpc:{8001:\"https://matic-mumbai.chainstacklabs.com\"}}}};web3Modal=new Web3Modal({providerOptions:providerOptions});_context.prev=2;_context.next=5;return web3Modal.connect();case 5:provider=_context.sent;_context.next=8;return activate(provider);case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function activateProvider(){return _ref.apply(this,arguments);};}();useEffect(function(){if(ens){setRendered(ens);}else if(account){setRendered(shortenAddress(account));}else{setRendered(\"\");}},[account,ens,setRendered]);useEffect(function(){if(error){console.error(\"Error while connecting wallet:\",error.message);}},[error]);useEffect(function(){if(chainId!==Mumbai.chainId){switchNetwork(Mumbai.chainId);}if(error){console.error(\"Error while connecting wallet:\",error.message);}},[chainId,error,switchNetwork]);return/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){if(!account){activateProvider();}else{deactivate();}},children:[rendered===\"\"&&\"Connect Wallet\",rendered!==\"\"&&rendered]});}","map":{"version":3,"names":["Button","Mumbai","shortenAddress","useEthers","useLookupAddress","React","useEffect","useState","Web3Modal","WalletConnectProvider","jsxs","_jsxs","WalletButton","_useState","_useState2","_slicedToArray","rendered","setRendered","_useLookupAddress","ens","_useEthers","account","activate","deactivate","switchNetwork","error","chainId","activateProvider","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","providerOptions","web3Modal","provider","wrap","_callee$","_context","prev","next","injected","display","name","description","package","walletconnect","options","rpc","connect","sent","t0","console","stop","apply","arguments","message","onClick","children"],"sources":["D:/dsdc-dashboard/packages/react-app/src/components/WalletButton.js"],"sourcesContent":["import { Button } from \"../components\";\r\nimport { Mumbai, shortenAddress, useEthers, useLookupAddress } from \"@usedapp/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Web3Modal from \"web3modal\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\n\r\nexport default function WalletButton() {\r\n  const [rendered, setRendered] = useState(\"\");\r\n\r\n  const { ens } = useLookupAddress();\r\n  const { account, activate, deactivate, switchNetwork, error, chainId } = useEthers();\r\n\r\n  const activateProvider = async () => {\r\n    const providerOptions = {\r\n      injected: {\r\n        display: {\r\n          name: \"Metamask\",\r\n          description: \"Connect with the provider in your Browser\",\r\n        },\r\n        package: null,\r\n      },\r\n      walletconnect: {\r\n        package: WalletConnectProvider,\r\n        options: {\r\n          chainId: 8001,\r\n          rpc: {\r\n            8001: \"https://matic-mumbai.chainstacklabs.com\",\r\n          },\r\n        },\r\n      },\r\n    };\r\n\r\n    const web3Modal = new Web3Modal({\r\n      providerOptions,\r\n    });\r\n    try {\r\n      const provider = await web3Modal.connect();\r\n      await activate(provider);\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (ens) {\r\n      setRendered(ens);\r\n    } else if (account) {\r\n      setRendered(shortenAddress(account));\r\n    } else {\r\n      setRendered(\"\");\r\n    }\r\n  }, [account, ens, setRendered]);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      console.error(\"Error while connecting wallet:\", error.message);\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    if (chainId !== Mumbai.chainId) {\r\n      switchNetwork(Mumbai.chainId)\r\n    }\r\n    if (error) {\r\n      console.error(\"Error while connecting wallet:\", error.message);\r\n    }\r\n  }, [chainId, error, switchNetwork]);\r\n\r\n  return (\r\n    <Button\r\n      onClick={() => {\r\n        if (!account) {\r\n          activateProvider();\r\n        } else {\r\n          deactivate();\r\n        }\r\n      }}\r\n    >\r\n      {rendered === \"\" && \"Connect Wallet\"}\r\n      {rendered !== \"\" && rendered}\r\n    </Button>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}